<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>MGè©•ä¾¡ã‚¹ã‚±ãƒ¼ãƒ«</title>
  <style>
    /* å…±é€šã‚¹ã‚¿ã‚¤ãƒ« - iOSé¢¨ */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
      max-width: 100%;
      margin: 0 auto;
      padding: 10px;
      background-color: #f2f2f7;
      color: #1c1c1e;
      line-height: 1.4;
    }
    
    h1, h2 {
      text-align: center;
      color: #1c1c1e;
      font-weight: 600;
      font-size: 1.5rem;
      margin: 15px 0;
    }
    
    h2 {
      font-size: 1.2rem;
    }
    
    /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ - iOSé¢¨ã‚¿ãƒ– */
    .nav {
      display: flex;
      margin-bottom: 20px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .nav-item {
      flex: 1;
      padding: 12px 0;
      cursor: pointer;
      text-align: center;
      font-weight: 500;
      transition: all 0.2s ease;
      color: #8e8e93;
    }
    
    .nav-item.active {
      font-weight: 600;
    }
    
    /* ã‚¿ãƒ–ã‚«ãƒ©ãƒ¼ */
    .nav-item[data-tab="adl"] {
      border-bottom: 3px solid transparent;
    }
    
    .nav-item[data-tab="adl"].active {
      color: #007aff;
      border-bottom: 3px solid #007aff;
    }
    
    .nav-item[data-tab="mgc"] {
      border-bottom: 3px solid transparent;
    }
    
    .nav-item[data-tab="mgc"].active {
      color: #34c759;
      border-bottom: 3px solid #34c759;
    }
    
    .nav-item[data-tab="mgqol"] {
      border-bottom: 3px solid transparent;
    }
    
    .nav-item[data-tab="mgqol"].active {
      color: #af52de;
      border-bottom: 3px solid #af52de;
    }
    
    .nav-item[data-tab="summary"] {
      border-bottom: 3px solid transparent;
    }
    
    .nav-item[data-tab="summary"].active {
      color: #ff9500;
      border-bottom: 3px solid #ff9500;
    }
    
    /* ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .tab-content {
      display: none;
      background-color: #ffffff;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      overflow-x: auto;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* ã‚¿ãƒƒãƒ—å…¥åŠ›ã‚¨ãƒªã‚¢è¿½åŠ  */
    .tap-input-section {
      background-color: #f9f9fb;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      border: 1px solid #e5e5ea;
    }
    
    .tap-input-title {
      font-weight: 600;
      color: #1c1c1e;
      margin-bottom: 10px;
      text-align: center;
    }
    
    .tap-input-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
    }
    
    .tap-item {
      background-color: white;
      border: 2px solid #e5e5ea;
      border-radius: 10px;
      padding: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      position: relative;
      overflow: hidden;
    }
    
    .tap-item:active {
      transform: scale(0.98);
    }
    
    .tap-item-name {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 5px;
    }
    
    .tap-item-score {
      font-size: 1.5rem;
      font-weight: 700;
      text-align: center;
      padding: 5px;
      border-radius: 5px;
      background-color: #f2f2f7;
      margin-top: 5px;
    }
    
    /* å„ã‚¹ã‚±ãƒ¼ãƒ«ã”ã¨ã®ã‚¿ãƒƒãƒ—ã‚¢ã‚¤ãƒ†ãƒ ã‚«ãƒ©ãƒ¼ */
    #adl .tap-item-score {
      color: #007aff;
    }
    
    #adl .tap-item.has-score {
      border-color: #007aff;
      background-color: rgba(0, 122, 255, 0.05);
    }
    
    #mgc .tap-item-score {
      color: #34c759;
    }
    
    #mgc .tap-item.has-score {
      border-color: #34c759;
      background-color: rgba(52, 199, 89, 0.05);
    }
    
    #mgqol .tap-item-score {
      color: #af52de;
    }
    
    #mgqol .tap-item.has-score {
      border-color: #af52de;
      background-color: rgba(175, 82, 222, 0.05);
    }
    
    /* ã‚¿ãƒƒãƒ—ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    @keyframes tapFeedback {
      0% {
        transform: scale(0);
        opacity: 0.5;
      }
      50% {
        opacity: 0.3;
      }
      100% {
        transform: scale(2);
        opacity: 0;
      }
    }
    
    .tap-feedback {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: currentColor;
      transform: translate(-50%, -50%);
      pointer-events: none;
      animation: tapFeedback 0.4s ease-out;
    }
    
    /* ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« - iOSé¢¨ã€æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ */
    .table-container {
      width: 100%;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      position: relative;
    }
    
    table {
      width: 100%;
      min-width: 500px; /* æœ€å°å¹…ã‚’è¨­å®šã—ã¦æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ä¿è¨¼ */
      border-collapse: separate;
      border-spacing: 0;
      margin-bottom: 20px;
      border-radius: 10px;
      overflow: hidden;
    }
    
    th, td {
      padding: 10px 8px;
      text-align: center;
      border-bottom: 1px solid #e5e5ea;
      font-size: 0.9rem;
    }
    
    th {
      background-color: #f2f2f7;
      font-weight: 600;
      color: #6c6c70;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    .item-label {
      font-weight: 600;
      text-align: left;
      color: #1c1c1e;
      min-width: 120px;
      position: sticky;
      left: 0;
      background-color: white;
      z-index: 5;
      border-right: 1px solid #e5e5ea;
    }
    
    .option {
      cursor: pointer;
      transition: background-color 0.2s ease;
      border-radius: 8px;
      margin: 2px;
    }
    
    .option:hover {
      background-color: #f2f2f7;
    }
    
    .selected {
      font-weight: 600;
    }
    
    /* å„ã‚¹ã‚±ãƒ¼ãƒ«ã”ã¨ã«é¸æŠè‰²ã‚’åˆ†ã‘ã‚‹ */
    #adl-table .selected {
      background-color: rgba(0, 122, 255, 0.15);
      color: #007aff;
    }
    
    #mgc-table .selected {
      background-color: rgba(52, 199, 89, 0.15);
      color: #34c759;
    }
    
    #mgqol-table .selected {
      background-color: rgba(175, 82, 222, 0.15);
      color: #af52de;
    }
    
    .description {
      font-size: 0.75em;
      color: #8e8e93;
      display: block;
      margin-top: 2px;
    }
    
    /* çµæœè¡¨ç¤º - iOSé¢¨ */
    .total {
      font-size: 1.2em;
      font-weight: 600;
      text-align: center;
      margin: 20px 0;
      padding: 12px;
      background-color: #f2f2f7;
      border-radius: 10px;
    }
    
    /* ADLåˆè¨ˆç‚¹æ•°å›ºå®šè¡¨ç¤º */
    .fixed-total {
      position: sticky;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 100;
      margin: 0;
      border-top: 1px solid #e5e5ea;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    }
    
    .result {
      width: 100%;
      height: 200px;
      margin-top: 20px;
      padding: 12px;
      border: 1px solid #e5e5ea;
      border-radius: 10px;
      font-family: -apple-system-monospaced, monospace;
      background-color: #f9f9fb;
      box-sizing: border-box;
    }
    
    /* ãƒœã‚¿ãƒ³ - iOSé¢¨ */
    .buttons {
      margin: 20px 0;
      text-align: center;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    button {
      background-color: #007aff;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 500;
      font-size: 0.95em;
      transition: background-color 0.2s ease;
      margin-bottom: 5px;
    }
    
    button:hover {
      background-color: #0062cc;
    }
    
    /* iOSé¢¨ã®ãƒœã‚¿ãƒ³ã‚«ãƒ©ãƒ¼ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ */
    .copy-button {
      background-color: #007aff; /* iOSé’ */
    }
    
    .reset-button {
      background-color: #ff3b30; /* iOSèµ¤ */
    }
    
    #to-mgc {
      background-color: #34c759; /* iOSç·‘ */
    }
    
    #to-mgqol {
      background-color: #af52de; /* iOSç´« */
    }
    
    .to-summary-button {
      background-color: #ff9500; /* iOSã‚ªãƒ¬ãƒ³ã‚¸ */
    }
    
    /* èª¬æ˜æ–‡ - iOSé¢¨ */
    .note {
      background-color: #f2f2f7;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 20px;
      color: #6c6c70;
      font-size: 0.9rem;
    }
    
    .tap-instruction {
      background-color: #fff3cd;
      border: 1px solid #ffc107;
      color: #856404;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 15px;
      font-size: 0.85rem;
      text-align: center;
    }
    
    /* ã‚¹ã‚³ã‚¢è¡¨ç¤º - iOSé¢¨ */
    .summary-scores {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .score-box {
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      flex: 1;
      min-width: 140px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .score-box-adl {
      background-color: rgba(0, 122, 255, 0.1);
      border: 1px solid rgba(0, 122, 255, 0.2);
    }
    
    .score-box-mgc {
      background-color: rgba(52, 199, 89, 0.1);
      border: 1px solid rgba(52, 199, 89, 0.2);
    }
    
    .score-box-mgqol {
      background-color: rgba(175, 82, 222, 0.1);
      border: 1px solid rgba(175, 82, 222, 0.2);
    }
    
    .score-value {
      font-size: 2.5em;
      font-weight: 700;
      margin: 10px 0;
      color: #1c1c1e;
    }
    
    .score-box-adl .score-value {
      color: #007aff;
    }
    
    .score-box-mgc .score-value {
      color: #34c759;
    }
    
    .score-box-mgqol .score-value {
      color: #af52de;
    }
    
    /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
    @media screen and (max-width: 480px) {
      body {
        padding: 8px;
      }
      
      h1 {
        font-size: 1.3rem;
      }
      
      h2 {
        font-size: 1.1rem;
      }
      
      .nav-item {
        padding: 10px 0;
        font-size: 0.85rem;
      }
      
      .score-box {
        flex: 100%;
        margin-bottom: 10px;
      }
      
      .tap-input-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      }
    }
  </style>
</head>
<body>
  <h1>MGè‡¨åºŠã‚¹ã‚³ã‚¢</h1>
  
  <div class="nav">
    <div class="nav-item active" data-tab="adl">MG-ADL</div>
    <div class="nav-item" data-tab="mgc">MG Composite</div>
    <div class="nav-item" data-tab="mgqol">MGQOL-15r</div>
    <div class="nav-item" data-tab="summary">ã‚¹ã‚³ã‚¢è¡¨ç¤º</div>
  </div>

  <!-- MG-ADL ã‚¿ãƒ– -->
  <div id="adl" class="tab-content active">
    <div class="note">
      é‡ç—‡ç­‹ç„¡åŠ›ç—‡ï¼ˆMGï¼‰ã®æ—¥å¸¸ç”Ÿæ´»å‹•ä½œï¼ˆADLï¼‰ã‚’è©•ä¾¡ã™ã‚‹ã‚¹ã‚±ãƒ¼ãƒ«ã§ã™ã€‚åˆè¨ˆç‚¹æ•°ãŒé«˜ã„ã»ã©é‡ç—‡åº¦ãŒé«˜ã„ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚
    </div>
    
    <div class="tap-instruction">
      ğŸ“± ã‚¿ãƒƒãƒ—ã§ç‚¹æ•°å…¥åŠ›ï¼š1å›ã‚¿ãƒƒãƒ—â†’1ç‚¹ã€2å›â†’2ç‚¹ã€3å›â†’3ç‚¹ã€4å›â†’0ç‚¹ã«æˆ»ã‚‹
    </div>
    
    <!-- ã‚¿ãƒƒãƒ—å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="tap-input-section">
      <div class="tap-input-title">ã‚¿ãƒƒãƒ—ã§ç‚¹æ•°ã‚’å…¥åŠ›</div>
      <div class="tap-input-grid" id="adl-tap-grid">
        <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
      </div>
    </div>
    
    <!-- å¾“æ¥ã®ãƒ†ãƒ¼ãƒ–ãƒ«å…¥åŠ› -->
    <details>
      <summary style="cursor: pointer; padding: 10px; background-color: #f2f2f7; border-radius: 8px; margin-bottom: 10px;">
        è©³ç´°è¡¨ç¤ºï¼ˆå¾“æ¥ã®å…¥åŠ›æ–¹æ³•ï¼‰
      </summary>
      <div class="table-container">
        <table id="adl-table">
          <tr>
            <th>é …ç›®</th>
            <th>0ç‚¹</th>
            <th>1ç‚¹</th>
            <th>2ç‚¹</th>
            <th>3ç‚¹</th>
          </tr>
          <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </table>
      </div>
    </details>

    <div id="adl-total" class="total fixed-total">åˆè¨ˆç‚¹: 0/24ç‚¹</div>

    <div class="buttons">
      <button class="copy-button" data-target="adl-result">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="reset-button" data-type="adl">ãƒªã‚»ãƒƒãƒˆ</button>
      <button id="to-mgc">MGCã«é€²ã‚€</button>
    </div>

    <h2>çµæœï¼ˆã‚³ãƒ”ãƒ¼ç”¨ï¼‰</h2>
    <textarea id="adl-result" class="result" readonly></textarea>
  </div>

  <!-- MG Composite ã‚¿ãƒ– -->
  <div id="mgc" class="tab-content">
    <div class="note">
      é‡ç—‡ç­‹ç„¡åŠ›ç—‡ï¼ˆMGï¼‰ã®é‡ç—‡åº¦ã‚’è©•ä¾¡ã™ã‚‹ã€ŒMG Composite Scaleã€ã§ã™ã€‚åˆè¨ˆç‚¹æ•°ãŒé«˜ã„ã»ã©é‡ç—‡åº¦ãŒé«˜ã„ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚
      MGADLè©•ä¾¡å¾Œãªã‚‰ã€é‡è¤‡ã™ã‚‹é …ç›®ã¯åæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚
    </div>
    
    <div class="tap-instruction">
      ğŸ“± ã‚¿ãƒƒãƒ—ã§ç‚¹æ•°å…¥åŠ›ï¼šã‚¿ãƒƒãƒ—å›æ•°ã§å„é …ç›®ã®ç‚¹æ•°ãŒå¤‰ã‚ã‚Šã¾ã™
    </div>
    
    <!-- ã‚¿ãƒƒãƒ—å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="tap-input-section">
      <div class="tap-input-title">ã‚¿ãƒƒãƒ—ã§ç‚¹æ•°ã‚’å…¥åŠ›</div>
      <div class="tap-input-grid" id="mgc-tap-grid">
        <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
      </div>
    </div>
    
    <!-- å¾“æ¥ã®ãƒ†ãƒ¼ãƒ–ãƒ«å…¥åŠ› -->
    <details>
      <summary style="cursor: pointer; padding: 10px; background-color: #f2f2f7; border-radius: 8px; margin-bottom: 10px;">
        è©³ç´°è¡¨ç¤ºï¼ˆå¾“æ¥ã®å…¥åŠ›æ–¹æ³•ï¼‰
      </summary>
      <div class="table-container">
        <table id="mgc-table">
          <tr>
            <th>æ¤œæŸ»é …ç›®</th>
            <th colspan="4">çŠ¶æ…‹ï¼ˆç‚¹æ•°ï¼‰</th>
          </tr>
          <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </table>
      </div>
    </details>

    <div id="mgc-total" class="total">åˆè¨ˆç‚¹: 0/50ç‚¹</div>

    <div class="buttons">
      <button class="copy-button" data-target="mgc-result">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="reset-button" data-type="mgc">ãƒªã‚»ãƒƒãƒˆ</button>
      <button id="to-mgqol">MGQOLã«é€²ã‚€</button>
    </div>

    <h2>çµæœï¼ˆã‚³ãƒ”ãƒ¼ç”¨ï¼‰</h2>
    <textarea id="mgc-result" class="result" readonly></textarea>
  </div>

  <!-- MGQOL-15 ã‚¿ãƒ– -->
  <div id="mgqol" class="tab-content">
    <div class="note">
      é‡ç—‡ç­‹ç„¡åŠ›ç—‡ï¼ˆMGï¼‰æ‚£è€…ã®QOLã‚’è©•ä¾¡ã™ã‚‹ã€ŒMGQOL-15rã€ã§ã™ã€‚15é …ç›®ã®è³ªå•ã«å¯¾ã—ã¦ã€0ã‹ã‚‰2ã§å›ç­”ã—ã¦ãã ã•ã„ã€‚
      åˆè¨ˆç‚¹æ•°ãŒé«˜ã„ã»ã©QOLãŒä½ä¸‹ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚
    </div>
    
    <div class="tap-instruction">
      ğŸ“± ã‚¿ãƒƒãƒ—ã§ç‚¹æ•°å…¥åŠ›ï¼š1å›ã‚¿ãƒƒãƒ—â†’1ç‚¹ã€2å›â†’2ç‚¹ã€3å›â†’0ç‚¹ã«æˆ»ã‚‹
    </div>
    
    <!-- ã‚¿ãƒƒãƒ—å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="tap-input-section">
      <div class="tap-input-title">ã‚¿ãƒƒãƒ—ã§ç‚¹æ•°ã‚’å…¥åŠ›</div>
      <div class="tap-input-grid" id="mgqol-tap-grid">
        <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
      </div>
    </div>
    
    <!-- å¾“æ¥ã®ãƒ†ãƒ¼ãƒ–ãƒ«å…¥åŠ› -->
    <details>
      <summary style="cursor: pointer; padding: 10px; background-color: #f2f2f7; border-radius: 8px; margin-bottom: 10px;">
        è©³ç´°è¡¨ç¤ºï¼ˆå¾“æ¥ã®å…¥åŠ›æ–¹æ³•ï¼‰
      </summary>
      <div class="table-container">
        <table id="mgqol-table">
          <tr>
            <th>è³ªå•é …ç›®</th>
            <th>0<br>å…¨ããã†ã¯æ€ã‚ãªã„</th>
            <th>1<br>å°‘ã—ãã†æ€ã†</th>
            <th>2<br>å¼·ããã†æ€ã†</th>
          </tr>
          <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </table>
      </div>
    </details>

    <div id="mgqol-total" class="total">åˆè¨ˆç‚¹: 0/30ç‚¹</div>

    <div class="buttons">
      <button class="copy-button" data-target="mgqol-result">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="reset-button" data-type="mgqol">ãƒªã‚»ãƒƒãƒˆ</button>
      <button onclick="MgApp.showTab('summary'); setTimeout(function() { window.scrollTo(0, 0); }, 50);" class="to-summary-button">ã‚¹ã‚³ã‚¢ã‚’è¡¨ç¤ºã™ã‚‹</button>
    </div>

    <h2>çµæœï¼ˆã‚³ãƒ”ãƒ¼ç”¨ï¼‰</h2>
    <textarea id="mgqol-result" class="result" readonly></textarea>
  </div>

  <!-- ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚¿ãƒ– -->
  <div id="summary" class="tab-content">
    <div class="note">
      è©•ä¾¡çµæœ
    </div>

    <div class="summary-scores">
      <div class="score-box score-box-adl">
        <h2>MG-ADL</h2>
        <div id="summary-adl-score" class="score-value">0/24</div>
      </div>
      <div class="score-box score-box-mgc">
        <h2>MG Composite</h2>
        <div id="summary-mgc-score" class="score-value">0/50</div>
      </div>
      <div class="score-box score-box-mgqol">
        <h2>MGQOL-15</h2>
        <div id="summary-mgqol-score" class="score-value">0/30</div>
      </div>
    </div>

    <div class="buttons">
      <button class="copy-button" data-target="summary-result">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
    </div>

    <h2>çµæœï¼ˆã‚³ãƒ”ãƒ¼ç”¨ï¼‰</h2>
    <textarea id="summary-result" class="result" style="height: 400px;" readonly></textarea>
  </div>

  <script>
    // ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©
    const MgApp = {
      // ADLã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
      adl: {
        // ã‚¹ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿
        scores: Array(8).fill(0),
        // å„é …ç›®ã®å®šç¾©
        items: [
          { name: "ä¼šè©±", options: ["æ­£å¸¸", "é–“æ¬ çš„ã«ä¸æ˜ç­ã‚‚ã—ãã¯é¼»å£°", "å¸¸ã«ä¸æ˜ç­ã‚‚ã—ãã¯é¼»å£°ã€ã—ã‹ã—èã„ã¦ç†è§£å¯èƒ½", "èã„ã¦ç†è§£ã™ã‚‹ã®ãŒå›°é›£"] },
          { name: "å’€åš¼", options: ["æ­£å¸¸", "å›ºå½¢ç‰©ã§ç–²åŠ´", "æŸ”ã‚‰ã‹ã„é£Ÿç‰©ã§ç–²åŠ´", "çµŒç®¡æ „é¤Š"] },
          { name: "åš¥ä¸‹", options: ["æ­£å¸¸", "ã¾ã‚Œã«ã‚€ã›ã‚‹", "é »å›ã«ã‚€ã›ã‚‹ãŸã‚ã€é£Ÿäº‹ã®å¤‰æ›´ãŒå¿…è¦", "çµŒç®¡æ „é¤Š"] },
          { name: "å‘¼å¸", options: ["æ­£å¸¸", "ä½“å‹•æ™‚ã®æ¯åˆ‡ã‚Œ", "å®‰é™æ™‚ã®æ¯åˆ‡ã‚Œ", "äººå·¥å‘¼å¸ã‚’è¦ã™ã‚‹"] },
          { name: "æ­¯ç£¨ããƒ»æ«›ä½¿ç”¨ã®éšœå®³", options: ["ãªã—", "åŠªåŠ›ã‚’è¦ã™ã‚‹ãŒä¼‘æ¯ã‚’è¦ã—ãªã„", "ä¼‘æ¯ã‚’è¦ã™ã‚‹", "ã§ããªã„"] },
          { name: "æ¤…å­ã‹ã‚‰ã®ç«‹ã¡ä¸ŠãŒã‚Šéšœå®³", options: ["ãªã—", "è»½åº¦ã€æ™‚ã€…è…•ã‚’ä½¿ã†", "ä¸­ç­‰åº¦ã€å¸¸ã«è…•ã‚’ä½¿ã†", "é«˜åº¦ã€ä»‹åŠ©ã‚’è¦ã™ã‚‹"] },
          { name: "è¤‡è¦–", options: ["ãªã—", "ã‚ã‚‹ãŒæ¯æ—¥ã§ã¯ãªã„", "æ¯æ—¥èµ·ã“ã‚‹ãŒæŒç¶šçš„ã§ãªã„", "å¸¸ã«ã‚ã‚‹"] },
          { name: "çœ¼ç¼ä¸‹å‚", options: ["ãªã—", "ã‚ã‚‹ãŒæ¯æ—¥ã§ã¯ãªã„", "æ¯æ—¥èµ·ã“ã‚‹ãŒæŒç¶šçš„ã§ãªã„", "å¸¸ã«ã‚ã‚‹"] }
        ],
        // æœ€å¤§ã‚¹ã‚³ã‚¢
        maxScore: 24
      },
      
      // MGCã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
      mgc: {
        // ã‚¹ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿
        scores: Array(10).fill(0),
        // å„é …ç›®ã®å®šç¾©
        items: [
          { 
            name: "ä¸Šæ–¹è¦–æ™‚ã®çœ¼ç¼ä¸‹å‚å‡ºç¾ã¾ã§ã®æ™‚é–“", 
            description: "ï¼ˆåŒ»å¸«ã®è¨ºå¯Ÿï¼‰",
            options: [">45ç§’", "11ã€œ45ç§’", "1ã€œ10ç§’", "å¸¸æ™‚"],
            values: [0, 1, 2, 3]
          },
          {
            name: "å´æ–¹è¦–æ™‚ã®è¤‡è¦–å‡ºç¾ã¾ã§ã®æ™‚é–“", 
            description: "ï¼ˆåŒ»å¸«ã®è¨ºå¯Ÿï¼‰",
            options: [">45ç§’", "11ã€œ45ç§’", "1ã€œ10ç§’", "å¸¸æ™‚"],
            values: [0, 1, 3, 4]
          },
          {
            name: "é–‰çœ¼ã®ç­‹åŠ›", 
            description: "ï¼ˆåŒ»å¸«ã®è¨ºå¯Ÿï¼‰",
            options: ["æ­£å¸¸", "è»½åº¦ä½ä¸‹ï¼ˆé–‰çœ¼ç¶­æŒå¯èƒ½ï¼‰", "ä¸­ç­‰åº¦ä½ä¸‹ï¼ˆé–‰çœ¼ç¶­æŒå›°é›£ï¼‰", "é‡åº¦ä½ä¸‹ï¼ˆé–‰çœ¼ä¸èƒ½ï¼‰"],
            values: [0, 0, 1, 2]
          },
          {
            name: "ä¼šè©±ã€ç™ºéŸ³", 
            description: "ï¼ˆMGADLï¼‰",
            options: ["æ­£å¸¸", "æ™‚ã«ä¸æ˜ç­ã¾ãŸã¯é¼»å£°", "å¸¸ã«ä¸æ˜ç­ã¾ãŸã¯é¼»å£°ã ãŒç†è§£å¯èƒ½", "ä¸æ˜ç­ã§ç†è§£ãŒå›°é›£"],
            values: [0, 2, 4, 6]
          },
          {
            name: "å’¬ã‚€å‹•ä½œ", 
            description: "ï¼ˆMGADLï¼‰",
            options: ["æ­£å¸¸", "å›ºã„é£Ÿç‰©ã§ç–²åŠ´", "æŸ”ã‚‰ã‹ã„é£Ÿç‰©ã§ã‚‚ç–²åŠ´", "æ „é¤Šãƒãƒ¥ãƒ¼ãƒ–ä½¿ç”¨"],
            values: [0, 2, 4, 6]
          },
          {
            name: "é£²ã¿è¾¼ã¿å‹•ä½œ", 
            description: "ï¼ˆMGADLï¼‰",
            options: ["æ­£å¸¸", "ã¾ã‚Œã«ã‚€ã›ã‚‹", "é »å›ã®ã‚€ã›ã®ãŸã‚é£Ÿäº‹ã«å·¥å¤«ã‚’è¦ã™", "æ „é¤Šãƒãƒ¥ãƒ¼ãƒ–ä½¿ç”¨"],
            values: [0, 2, 5, 6]
          },
          {
            name: "MGã«ã‚ˆã‚‹å‘¼å¸çŠ¶æ…‹", 
            description: "ï¼ˆMGADLï¼‰",
            options: ["æ­£å¸¸", "æ´»å‹•æ™‚æ¯åˆ‡ã‚Œ", "å®‰é™æ™‚æ¯åˆ‡ã‚Œ", "å‘¼å¸è£œåŠ©è£…ç½®ä½¿ç”¨"],
            values: [0, 2, 4, 9]
          },
          {
            name: "é ¸ã®å‰å±ˆ/èƒŒå±ˆç­‹åŠ›", 
            description: "ï¼ˆå¼±ã„æ–¹ã‚’é¸æŠã€åŒ»å¸«ã®è¨ºå¯Ÿï¼‰",
            options: ["æ­£å¸¸", "è»½åº¦ä½ä¸‹", "ä¸­ç­‰åº¦ä½ä¸‹ï¼ˆãŠãŠã‚ˆãåŠæ¸›ï¼‰", "é‡åº¦ä½ä¸‹"],
            values: [0, 1, 3, 4]
          },
          {
            name: "ä¸Šè‚¢ã®æŒ™ä¸Šç­‹åŠ›", 
            description: "ï¼ˆåŒ»å¸«ã®è¨ºå¯Ÿï¼‰",
            options: ["æ­£å¸¸", "è»½åº¦ä½ä¸‹", "ä¸­ç­‰åº¦ä½ä¸‹ï¼ˆãŠãŠã‚ˆãåŠæ¸›ï¼‰", "é‡åº¦ä½ä¸‹"],
            values: [0, 2, 4, 5]
          },
          {
            name: "ä¸‹è‚¢ã®æŒ™ä¸Šç­‹åŠ›", 
            description: "ï¼ˆåŒ»å¸«ã®è¨ºå¯Ÿï¼‰",
            options: ["æ­£å¸¸", "è»½åº¦ä½ä¸‹", "ä¸­ç­‰åº¦ä½ä¸‹ï¼ˆãŠãŠã‚ˆãåŠæ¸›ï¼‰", "é‡åº¦ä½ä¸‹"],
            values: [0, 2, 4, 5]
          }
        ],
        // æœ€å¤§ã‚¹ã‚³ã‚¢
        maxScore: 50
      },
      
      // MGQOLã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
      mgqol: {
        // ã‚¹ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿
        scores: Array(15).fill(0),
        // å„é …ç›®ã®å®šç¾©
        items: [
          { name: "MGã®ç—…çŠ¶ã«ä¸æº€ã§ã‚ã‚‹" },
          { name: "MGã®ãŸã‚ç‰©ã‚’è¦‹ã‚‹éš›ã«æ”¯éšœãŒç”Ÿã˜ã‚‹ï¼ˆäºŒé‡ã«è¦‹ãˆã‚‹ã€ã¾ã¶ãŸãŒä¸‹ãŒã‚‹ã€ãªã©ï¼‰" },
          { name: "MGã®ãŸã‚é£Ÿã¹ã‚‹éš›ã«æ”¯éšœãŒç”Ÿã˜ã‚‹" },
          { name: "MGã®ãŸã‚ç¤¾ä¼šæ´»å‹•ã«åˆ¶é™ãŒç”Ÿã˜ã¦ã„ã‚‹" },
          { name: "MGã®ãŸã‚è¶£å‘³ã‚„å¨¯æ¥½ã‚’ä»¥å‰ã»ã©æ¥½ã—ã‚ãªã„" },
          { name: "MGã®ãŸã‚å®¶æ—ã®è¦æ±‚ã«ååˆ†å¿œãˆã‚‰ã‚Œãªã„" },
          { name: "MGã®ãŸã‚è¡Œå‹•ã«å·¥å¤«ãŒå¿…è¦" },
          { name: "MGã®ãŸã‚ä»•äº‹ã‚„å½¹å‰²ï¼ˆå®¶åº­ã‚’å«ã‚€ï¼‰ã«åˆ¶é™ãŒç”Ÿã˜æ‚©ã¾ã•ã‚Œã¦ã„ã‚‹" },
          { name: "MGã®ãŸã‚è©±ã™éš›ã«æ”¯éšœãŒç”Ÿã˜ã‚‹" },
          { name: "MGã®ãŸã‚å¤–å‡ºã€ç”¨è¶³ã—ã‚’ã²ã¨ã‚Šã§ã™ã‚‹ã“ã¨ãŒé›£ã—ã„ï¼ˆè»Šã®é‹è»¢ã€è²·ã„ç‰©ãªã©ï¼‰" },
          { name: "MGã®ãŸã‚æ°—æŒã¡ãŒè½ã¡è¾¼ã‚€" },
          { name: "MGã®ãŸã‚æ­©è¡Œã«æ”¯éšœãŒç”Ÿã˜ã‚‹" },
          { name: "MGã®ãŸã‚å‘¨å›²ã¨åŒã˜æ—©ã•ã§è¡Œå‹•å‡ºæ¥ãªã„ï¼ˆå…¬å…±ã®å ´æ‰€ãªã©ã§ï¼‰" },
          { name: "MGã§ã¤ã‚‰ãã¦ç²¾ç¥çš„ã«æŠ¼ã—æ½°ã•ã‚Œãã†ã«ãªã‚‹" },
          { name: "MGã®ãŸã‚èº«æ”¯åº¦ã«æ”¯éšœãŒç”Ÿã˜ã‚‹" }
        ],
        // æœ€å¤§ã‚¹ã‚³ã‚¢
        maxScore: 30
      },
      
      // ADLã¨MGCã®é …ç›®ãƒãƒƒãƒ”ãƒ³ã‚°å®šç¾©
      adlToMgcMap: [
        { adlIndex: 0, mgcIndex: 3 }, // ä¼šè©± â†’ ä¼šè©±ã€ç™ºéŸ³
        { adlIndex: 1, mgcIndex: 4 }, // å’€åš¼ â†’ å’¬ã‚€å‹•ä½œ
        { adlIndex: 2, mgcIndex: 5 }, // åš¥ä¸‹ â†’ é£²ã¿è¾¼ã¿å‹•ä½œ
        { adlIndex: 3, mgcIndex: 6 }  // å‘¼å¸ â†’ MGã«ã‚ˆã‚‹å‘¼å¸çŠ¶æ…‹
      ],
      
      // åˆæœŸåŒ–å‡¦ç†
      init: function() {
        this.renderTables();
        this.renderTapInputs();
        this.setupEventListeners();
        this.resetScores('adl');
        this.resetScores('mgc');
        this.resetScores('mgqol');
        this.updateResults();
      },
      
      // ã‚¿ãƒƒãƒ—å…¥åŠ›UIã®ç”Ÿæˆ
      renderTapInputs: function() {
        // ADLã‚¿ãƒƒãƒ—å…¥åŠ›
        const adlTapGrid = document.getElementById('adl-tap-grid');
        this.adl.items.forEach((item, index) => {
          const tapItem = this.createTapItem('adl', item.name, index, 3);
          adlTapGrid.appendChild(tapItem);
        });
        
        // MGCã‚¿ãƒƒãƒ—å…¥åŠ›
        const mgcTapGrid = document.getElementById('mgc-tap-grid');
        this.mgc.items.forEach((item, index) => {
          const maxValue = Math.max(...item.values);
          const tapItem = this.createTapItem('mgc', item.name, index, maxValue);
          mgcTapGrid.appendChild(tapItem);
        });
        
        // MGQOLã‚¿ãƒƒãƒ—å…¥åŠ›
        const mgqolTapGrid = document.getElementById('mgqol-tap-grid');
        this.mgqol.items.forEach((item, index) => {
          const tapItem = this.createTapItem('mgqol', `${index + 1}. ${item.name.substring(0, 10)}...`, index, 2);
          tapItem.title = item.name; // ãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§è¡¨ç¤º
          mgqolTapGrid.appendChild(tapItem);
        });
      },
      
      // ã‚¿ãƒƒãƒ—ã‚¢ã‚¤ãƒ†ãƒ ã®ä½œæˆ
      createTapItem: function(type, name, index, maxScore) {
        const div = document.createElement('div');
        div.className = 'tap-item';
        div.dataset.type = type;
        div.dataset.index = index;
        div.dataset.maxScore = maxScore;
        
        const nameDiv = document.createElement('div');
        nameDiv.className = 'tap-item-name';
        nameDiv.textContent = name;
        
        const scoreDiv = document.createElement('div');
        scoreDiv.className = 'tap-item-score';
        scoreDiv.textContent = '0';
        
        div.appendChild(nameDiv);
        div.appendChild(scoreDiv);
        
        // ã‚¿ãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆã®è¨­å®š
        div.addEventListener('click', (e) => {
          this.handleTapInput(e, div);
        });
        
        return div;
      },
      
      // ã‚¿ãƒƒãƒ—å…¥åŠ›ã®å‡¦ç†
      handleTapInput: function(e, element) {
        const type = element.dataset.type;
        const index = parseInt(element.dataset.index);
        const maxScore = parseInt(element.dataset.maxScore);
        
        // ç¾åœ¨ã®ã‚¹ã‚³ã‚¢ã‚’å–å¾—
        let currentScore;
        if (type === 'mgc') {
          // MGCã¯å®Ÿéš›ã®å€¤ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—
          currentScore = this.mgc.scores[index];
        } else {
          currentScore = this[type].scores[index];
        }
        
        // æ¬¡ã®ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—ï¼ˆå¾ªç’°ï¼‰
        let nextScore;
        if (type === 'mgc') {
          // MGCã¯å€¤ã®é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å¾ªç’°
          nextScore = (currentScore + 1) % this.mgc.items[index].values.length;
        } else {
          nextScore = (currentScore + 1) % (maxScore + 1);
        }
        
        // ã‚¹ã‚³ã‚¢ã‚’æ›´æ–°
        this[type].scores[index] = nextScore;
        
        // è¡¨ç¤ºã‚’æ›´æ–°
        const scoreDiv = element.querySelector('.tap-item-score');
        if (type === 'mgc') {
          scoreDiv.textContent = this.mgc.items[index].values[nextScore];
        } else {
          scoreDiv.textContent = nextScore;
        }
        
        // ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–°
        if (nextScore > 0) {
          element.classList.add('has-score');
        } else {
          element.classList.remove('has-score');
        }
        
        // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        const feedback = document.createElement('div');
        feedback.className = 'tap-feedback';
        element.appendChild(feedback);
        setTimeout(() => feedback.remove(), 400);
        
        // ãƒ†ãƒ¼ãƒ–ãƒ«ã®é¸æŠã‚‚æ›´æ–°
        this.updateTableSelection(type, index, nextScore);
        
        // çµæœã‚’æ›´æ–°
        this.updateResults();
      },
      
      // ãƒ†ãƒ¼ãƒ–ãƒ«ã®é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°
      updateTableSelection: function(type, rowIndex, scoreIndex) {
        const table = document.getElementById(`${type}-table`);
        const rows = table.querySelectorAll('tr');
        const row = rows[rowIndex + 1]; // ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—
        
        // é¸æŠè§£é™¤
        row.querySelectorAll('.selected').forEach(cell => {
          cell.classList.remove('selected');
        });
        
        // é¸æŠ
        const options = row.querySelectorAll('.option');
        if (options[scoreIndex]) {
          options[scoreIndex].classList.add('selected');
        }
      },
      
      // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
      setupEventListeners: function() {
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll('.nav-item').forEach(navItem => {
          navItem.addEventListener('click', () => {
            this.showTab(navItem.dataset.tab);
          });
        });
        
        // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³
        document.querySelectorAll('.copy-button').forEach(button => {
          button.addEventListener('click', () => {
            this.copyResult(button.dataset.target);
          });
        });
        
        // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
        document.querySelectorAll('.reset-button').forEach(button => {
          button.addEventListener('click', () => {
            this.resetScores(button.dataset.type);
          });
        });
        
        // ã‚¿ãƒ–é–“ç§»å‹•ãƒœã‚¿ãƒ³ - MGCã«é€²ã‚€
        document.getElementById('to-mgc').addEventListener('click', () => {
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
          setTimeout(() => {
            this.showTab('mgc');
            this.mapAdlToMgc();
          }, 50);
        });
        
        // ã‚¿ãƒ–é–“ç§»å‹•ãƒœã‚¿ãƒ³ - MGQOLã«é€²ã‚€
        document.getElementById('to-mgqol').addEventListener('click', () => {
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
          setTimeout(() => {
            this.showTab('mgqol');
          }, 50);
        });
      },
      
      // ãƒ†ãƒ¼ãƒ–ãƒ«ã®æç”»
      renderTables: function() {
        // ADLãƒ†ãƒ¼ãƒ–ãƒ«
        const adlTable = document.getElementById('adl-table');
        
        this.adl.items.forEach((item, rowIndex) => {
          const row = document.createElement('tr');
          const itemCell = document.createElement('td');
          itemCell.className = 'item-label';
          itemCell.textContent = item.name;
          row.appendChild(itemCell);
          
          item.options.forEach((option, colIndex) => {
            const cell = document.createElement('td');
            cell.className = 'option';
            cell.textContent = option;
            cell.addEventListener('click', () => {
              this.selectOption('adl', rowIndex, colIndex);
            });
            row.appendChild(cell);
          });
          
          adlTable.appendChild(row);
        });
        
        // MGCãƒ†ãƒ¼ãƒ–ãƒ«
        const mgcTable = document.getElementById('mgc-table');
        
        this.mgc.items.forEach((item, rowIndex) => {
          const row = document.createElement('tr');
          const itemCell = document.createElement('td');
          itemCell.className = 'item-label';
          itemCell.innerHTML = `${item.name}<br><span class="description">${item.description}</span>`;
          row.appendChild(itemCell);
          
          item.options.forEach((option, colIndex) => {
            const cell = document.createElement('td');
            cell.className = 'option';
            cell.innerHTML = `${option}<br><span class="description">${item.values[colIndex]}ç‚¹</span>`;
            cell.addEventListener('click', () => {
              this.selectOption('mgc', rowIndex, colIndex);
            });
            row.appendChild(cell);
          });
          
          mgcTable.appendChild(row);
        });
        
        // MGQOLãƒ†ãƒ¼ãƒ–ãƒ«
        const mgqolTable = document.getElementById('mgqol-table');
        
        this.mgqol.items.forEach((item, rowIndex) => {
          const row = document.createElement('tr');
          const itemCell = document.createElement('td');
          itemCell.className = 'item-label';
          itemCell.textContent = item.name;
          row.appendChild(itemCell);
          
          // 0ã‹ã‚‰2ã¾ã§ã®3æ®µéšè©•ä¾¡
          for (let i = 0; i <= 2; i++) {
            const cell = document.createElement('td');
            cell.className = 'option';
            cell.textContent = i;
            cell.addEventListener('click', () => {
              this.selectOption('mgqol', rowIndex, i);
            });
            row.appendChild(cell);
          }
          
          mgqolTable.appendChild(row);
        });
      },
      
      // ã‚¿ãƒ–ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
      showTab: function(tabId) {
        // ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll('.tab-content').forEach(tab => {
          tab.classList.remove('active');
        });
        document.getElementById(tabId).classList.add('active');
        
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll('.nav-item').forEach(nav => {
          nav.classList.remove('active');
        });
        document.querySelector(`.nav-item[data-tab="${tabId}"]`).classList.add('active');
        
        // ã‚µãƒãƒªãƒ¼ã‚¿ãƒ–ãªã‚‰æ›´æ–°
        if (tabId === 'summary') {
          this.updateSummary();
        }
        
        // ç”»é¢ä¸Šéƒ¨ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      },
      
      // é¸æŠå‡¦ç†ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯æ™‚ï¼‰
      selectOption: function(type, rowIndex, colIndex) {
        // ã‚¹ã‚³ã‚¢æ›´æ–°
        this[type].scores[rowIndex] = colIndex;
        
        // ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºæ›´æ–°
        this.updateTableSelection(type, rowIndex, colIndex);
        
        // ã‚¿ãƒƒãƒ—å…¥åŠ›ã®è¡¨ç¤ºã‚‚æ›´æ–°
        this.updateTapDisplay(type, rowIndex, colIndex);
        
        // çµæœæ›´æ–°
        this.updateResults();
      },
      
      // ã‚¿ãƒƒãƒ—å…¥åŠ›ã®è¡¨ç¤ºã‚’æ›´æ–°
      updateTapDisplay: function(type, index, score) {
        const tapGrid = document.getElementById(`${type}-tap-grid`);
        const tapItem = tapGrid.children[index];
        const scoreDiv = tapItem.querySelector('.tap-item-score');
        
        if (type === 'mgc') {
          scoreDiv.textContent = this.mgc.items[index].values[score];
        } else {
          scoreDiv.textContent = score;
        }
        
        if (score > 0) {
          tapItem.classList.add('has-score');
        } else {
          tapItem.classList.remove('has-score');
        }
      },
      
      // ADLã®åˆè¨ˆç‚¹è¨ˆç®—
      calculateAdlTotal: function() {
        return this.adl.scores.reduce((sum, score) => sum + score, 0);
      },
      
      // MGCã®åˆè¨ˆç‚¹è¨ˆç®—
      calculateMgcTotal: function() {
        return this.mgc.scores.reduce((sum, score, index) => {
          return sum + this.mgc.items[index].values[score];
        }, 0);
      },
      
      // MGQOLã®åˆè¨ˆç‚¹è¨ˆç®—
      calculateMgqolTotal: function() {
        return this.mgqol.scores.reduce((sum, score) => sum + score, 0);
      },
      
      // å…¨çµæœè¡¨ç¤ºã®æ›´æ–°
      updateResults: function() {
        this.updateAdlResult();
        this.updateMgcResult();
        this.updateMgqolResult();
        this.updateSummary();
      },
      
      // ADLçµæœã®æ›´æ–°
      updateAdlResult: function() {
        const total = this.calculateAdlTotal();
        
        // åˆè¨ˆè¡¨ç¤ºã®æ›´æ–°
        document.getElementById('adl-total').textContent = `åˆè¨ˆç‚¹: ${total}/${this.adl.maxScore}ç‚¹`;
        document.getElementById('summary-adl-score').textContent = `${total}/${this.adl.maxScore}`;
        
        // çµæœãƒ†ã‚­ã‚¹ãƒˆã®æ›´æ–°
        let resultText = "MG-ADLã‚¹ã‚±ãƒ¼ãƒ«çµæœ\n";
        resultText += "æ—¥ä»˜: " + new Date().toLocaleDateString('ja-JP') + "\n";
        resultText += "------------------------\n";
        
        this.adl.items.forEach((item, index) => {
          const score = this.adl.scores[index];
          const selectedText = item.options[score];
          resultText += `${item.name}: ${score}ç‚¹ (${selectedText})\n`;
        });
        
        resultText += "------------------------\n";
        resultText += `åˆè¨ˆç‚¹: ${total}/${this.adl.maxScore}ç‚¹`;
        
        document.getElementById('adl-result').value = resultText;
      },
      
      // MGCçµæœã®æ›´æ–°
      updateMgcResult: function() {
        const total = this.calculateMgcTotal();
        
        // åˆè¨ˆè¡¨ç¤ºã®æ›´æ–°
        document.getElementById('mgc-total').textContent = `åˆè¨ˆç‚¹: ${total}/${this.mgc.maxScore}ç‚¹`;
        document.getElementById('summary-mgc-score').textContent = `${total}/${this.mgc.maxScore}`;
        
        // çµæœãƒ†ã‚­ã‚¹ãƒˆã®æ›´æ–°
        let resultText = "MG Composite Scaleçµæœ\n";
        resultText += "æ—¥ä»˜: " + new Date().toLocaleDateString('ja-JP') + "\n";
        resultText += "------------------------\n";
        
        this.mgc.items.forEach((item, index) => {
          const score = this.mgc.scores[index];
          const selectedText = item.options[score];
          const scoreValue = item.values[score];
          
          resultText += `${item.name}\n`;
          resultText += `  ${scoreValue}ç‚¹: ${selectedText}\n`;
        });
        
        resultText += "------------------------\n";
        resultText += `åˆè¨ˆç‚¹: ${total}/${this.mgc.maxScore}ç‚¹`;
        
        document.getElementById('mgc-result').value = resultText;
      },
      
      // MGQOLçµæœã®æ›´æ–°
      updateMgqolResult: function() {
        const total = this.calculateMgqolTotal();
        
        // åˆè¨ˆè¡¨ç¤ºã®æ›´æ–°
        document.getElementById('mgqol-total').textContent = `åˆè¨ˆç‚¹: ${total}/${this.mgqol.maxScore}ç‚¹`;
        document.getElementById('summary-mgqol-score').textContent = `${total}/${this.mgqol.maxScore}`;
        
        // çµæœãƒ†ã‚­ã‚¹ãƒˆã®æ›´æ–°
        let resultText = "MGQOL-15rçµæœ\n";
        resultText += "æ—¥ä»˜: " + new Date().toLocaleDateString('ja-JP') + "\n";
        resultText += "------------------------\n";
        
        this.mgqol.items.forEach((item, index) => {
          const score = this.mgqol.scores[index];
          const scoreText = ["å…¨ããã†ã¯æ€ã‚ãªã„", "å°‘ã—ãã†æ€ã†", "å¼·ããã†æ€ã†"][score];
          resultText += `${index + 1}. ${item.name}: ${score}ç‚¹ (${scoreText})\n`;
        });
        
        resultText += "------------------------\n";
        resultText += `åˆè¨ˆç‚¹: ${total}/${this.mgqol.maxScore}ç‚¹`;
        
        document.getElementById('mgqol-result').value = resultText;
      },
      
      // ã‚µãƒãƒªãƒ¼æ›´æ–°
      updateSummary: function() {
        const adlTotal = this.calculateAdlTotal();
        const mgcTotal = this.calculateMgcTotal();
        const mgqolTotal = this.calculateMgqolTotal();
        
        let summaryText = "MGè©•ä¾¡ã‚¹ã‚±ãƒ¼ãƒ« ç·åˆçµæœ\n";
        summaryText += "æ—¥ä»˜: " + new Date().toLocaleDateString('ja-JP') + "\n";
        summaryText += "========================\n\n";
        
        // ADLçµæœ
        summaryText += "ã€MG-ADL ã‚¹ã‚±ãƒ¼ãƒ«ã€‘\n";
        summaryText += `åˆè¨ˆç‚¹: ${adlTotal}/${this.adl.maxScore}ç‚¹\n\n`;
        this.adl.items.forEach((item, index) => {
          const score = this.adl.scores[index];
          const selectedText = item.options[score];
          summaryText += `${item.name}: ${score}ç‚¹ (${selectedText})\n`;
        });
        summaryText += "\n\n";
        
        // MGCçµæœ
        summaryText += "ã€MG Composite Scaleã€‘\n";
        summaryText += `åˆè¨ˆç‚¹: ${mgcTotal}/${this.mgc.maxScore}ç‚¹\n\n`;
        this.mgc.items.forEach((item, index) => {
          const score = this.mgc.scores[index];
          const selectedText = item.options[score];
          const scoreValue = item.values[score];
          summaryText += `${item.name}: ${scoreValue}ç‚¹ (${selectedText})\n`;
        });
        summaryText += "\n\n";
        
        // MGQOLçµæœ
        summaryText += "ã€MGQOL-15rã€‘\n";
        summaryText += `åˆè¨ˆç‚¹: ${mgqolTotal}/${this.mgqol.maxScore}ç‚¹\n\n`;
        this.mgqol.items.forEach((item, index) => {
          const score = this.mgqol.scores[index];
          const scoreText = ["å…¨ããã†ã¯æ€ã‚ãªã„", "å°‘ã—ãã†æ€ã†", "å¼·ããã†æ€ã†"][score];
          summaryText += `${index + 1}. ${item.name}: ${score}ç‚¹ (${scoreText})\n`;
        });
        
        document.getElementById('summary-result').value = summaryText;
      },
      
      // çµæœã‚³ãƒ”ãƒ¼
      copyResult: function(elementId) {
        const resultText = document.getElementById(elementId);
        resultText.select();
        document.execCommand('copy');
        alert('çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
      },
      
      // ã‚¹ã‚³ã‚¢ãƒªã‚»ãƒƒãƒˆ
      resetScores: function(type) {
        // ã‚¹ã‚³ã‚¢ã‚’0ã«åˆæœŸåŒ–
        this[type].scores.fill(0);
        
        // ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºã®æ›´æ–°
        const table = document.getElementById(`${type}-table`);
        const rows = table.querySelectorAll('tr');
        
        for (let i = 1; i < rows.length; i++) { // ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—
          const row = rows[i];
          
          // é¸æŠè§£é™¤
          row.querySelectorAll('.selected').forEach(cell => {
            cell.classList.remove('selected');
          });
          
          // 0ç‚¹ï¼ˆæœ€åˆã®é¸æŠè‚¢ï¼‰ã‚’é¸æŠ
          const options = row.querySelectorAll('.option');
          if (options.length > 0) {
            options[0].classList.add('selected');
          }
        }
        
        // ã‚¿ãƒƒãƒ—å…¥åŠ›è¡¨ç¤ºã®æ›´æ–°
        const tapGrid = document.getElementById(`${type}-tap-grid`);
        Array.from(tapGrid.children).forEach((tapItem, index) => {
          const scoreDiv = tapItem.querySelector('.tap-item-score');
          scoreDiv.textContent = '0';
          tapItem.classList.remove('has-score');
        });
        
        // çµæœæ›´æ–°
        this.updateResults();
      },
      
      // ADLã‹ã‚‰MGCã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°
      mapAdlToMgc: function() {
        this.adlToMgcMap.forEach(mapping => {
          const adlIndex = mapping.adlIndex;
          const mgcIndex = mapping.mgcIndex;
          
          // ADLã®å€¤ã‚’MGCã«åæ˜ 
          this.mgc.scores[mgcIndex] = this.adl.scores[adlIndex];
          
          // MGCãƒ†ãƒ¼ãƒ–ãƒ«ã®è¡¨ç¤ºã‚‚æ›´æ–°
          this.updateTableSelection('mgc', mgcIndex, this.adl.scores[adlIndex]);
          
          // ã‚¿ãƒƒãƒ—å…¥åŠ›ã®è¡¨ç¤ºã‚‚æ›´æ–°
          this.updateTapDisplay('mgc', mgcIndex, this.adl.scores[adlIndex]);
        });
        
        // çµæœæ›´æ–°
        this.updateResults();
      }
    };
    
    // åˆæœŸåŒ–å®Ÿè¡Œ
    document.addEventListener('DOMContentLoaded', function() {
      MgApp.init();
    });
  </script>
</body>
</html>